<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- USERS -->
<mapper namespace="pyl.mapper.UsersMapper">
    <!-- This code was generated by TableGo tools, mark 1 begin. -->
    <!-- 字段映射 -->
    <resultMap id="usersMap" type="Users">
        <id column="UID" property="uid" jdbcType="INTEGER" />
        <result column="UEMAIL" property="uemail" jdbcType="VARCHAR" />
        <result column="UPASSWORD" property="upassword" jdbcType="VARCHAR" />
        <result column="UPHOTO" property="uphoto" jdbcType="VARCHAR" />
        <result column="USEX" property="usex" jdbcType="VARCHAR" />
        <result column="UADDRESS" property="uaddress" jdbcType="VARCHAR" />
        <result column="UMAXIM" property="umaxim" jdbcType="VARCHAR" />
        <result column="UNICKNAME" property="unickname" jdbcType="VARCHAR" />
        <result column="UREGISTERTIME" property="uregistertime" jdbcType="VARCHAR" />
        <result column="UBAN" property="uban" jdbcType="VARCHAR" />
        <result column="USIGNINTIME" property="usignintime" jdbcType="VARCHAR" />
        <result column="USCORE" property="uscore" jdbcType="INTEGER" />
        <result column="USIGNINDAY" property="usigninday" jdbcType="INTEGER" />
        <result column="logintime" property="logintime" jdbcType="VARCHAR" />
    </resultMap>
    <!-- This code was generated by TableGo tools, mark 1 end. -->
    
    <!-- This code was generated by TableGo tools, mark 2 begin. -->
    <!-- 表所有字段 -->
    <sql id="allColumns">
        UID, UEMAIL, UPASSWORD, UPHOTO, USEX, UADDRESS, UMAXIM, UNICKNAME, 
        UREGISTERTIME, UBAN, USIGNINTIME, USCORE, usigninday, logintime
    </sql>
    <!-- This code was generated by TableGo tools, mark 2 end. -->
    
    <!-- 查询所有数据 -->
    <select id="findUsersAll" resultMap="usersMap">
        SELECT
        <include refid="allColumns" />
        FROM USERS
    </select>
    
   <!-- 根据条件参数查询数据列表 -->
    <select id="findUsersByCondition" resultMap="usersMap" parameterType="map">
        SELECT
        <include refid="allColumns" />
        FROM USERS WHERE 1 = 1
        <if test="uemail != null and uemail != ''">
            AND UEMAIL =#{uemail}
        </if>
        <if test="upassword != null and upassword != ''">
            AND UPASSWORD LIKE CONCAT('%', #{upassword}, '%')
        </if>
        <if test="uphoto != null and uphoto != ''">
            AND UPHOTO LIKE CONCAT('%', #{uphoto}, '%')
        </if>
        <if test="usex != null and usex != ''">
            AND USEX LIKE CONCAT('%', #{usex}, '%')
        </if>
        <if test="uaddress != null and uaddress != ''">
            AND UADDRESS LIKE CONCAT('%', #{uaddress}, '%')
        </if>
        <if test="umaxim != null and umaxim != ''">
            AND UMAXIM LIKE CONCAT('%', #{umaxim}, '%')
        </if>
        <if test="unickname != null and unickname != ''">
            AND UNICKNAME LIKE CONCAT('%', #{unickname}, '%')
        </if>
        <if test="uregistertime != null">
            AND UREGISTERTIME = #{uregistertime}
        </if>
        <if test="uban != null and uban != ''">
            AND UBAN LIKE CONCAT('%', #{uban}, '%')
        </if>
        <if test="usignintime != null">
            AND USIGNINTIME = #{usignintime}
        </if>
        <if test="uscore != null">
            AND USCORE = #{uscore}
        </if>
        <if test="usigninday != null">
            AND USIGNINDAY = #{usigninday}
        </if>
        <if test="logintime != null and logintime != ''">
            AND logintime LIKE CONCAT('%', #{logintime}, '%')
        </if>
    </select>
    
    <!-- 根据主键查询数据 -->
    <select id="findUsersByIds" resultMap="usersMap" parameterType="list">
        SELECT
        <include refid="allColumns" />
        FROM USERS WHERE UID IN
        <foreach collection="list" index="index" item="uid" open="(" separator="," close=")">
            #{uid}
        </foreach>
    </select>
    
      <!-- 查询该用户总数 -->
    <select id="findUsersMaxNum" resultType="_int" parameterType="map">
        SELECT COUNT(UID) FROM USERS WHERE 1=1
        <if test="postsTitle != null and postsTitle != ''">
            AND POSTS_TITLE LIKE CONCAT('%', #{postsTitle}, '%')
        </if>
        <if test="smoduleName != null and smoduleName != ''">
            AND SMODULE_NAME =#{smoduleName}
        </if>
    </select>
    <!-- 插入数据 
    <insert id="insertUsers" parameterType="Users">
        INSERT INTO USERS (
             uemail, upassword, uphoto, usex, uaddress, UMAXIM, UNICKNAME, 
            UREGISTERTIME, UBAN, USIGNINTIME, USCORE, USIGNINDAY, logintime
        ) VALUES (
            
            #{uemail},
            #{upassword},
            #{uphoto},
            #{usex},
            #{uaddress},
            #{uMaxim},
            #{unickname},
            #{uRegistertime},
            #{uBan},
            #{uSignintime},
            #{uScore},
            #{uSigninday},
            #{logintime}
        )
    </insert>-->
    <!-- 插入数据 -->
    <insert id="insertUsers" parameterType="Users">
        INSERT INTO USERS (
               UEMAIL, UPASSWORD, UPHOTO, USEX, UADDRESS, UMAXIM, UNICKNAME, 
            UREGISTERTIME,  USIGNINTIME,  logintime
        ) VALUES (
            #{uemail},
            #{upassword},
            #{uphoto},
            #{usex},
            #{uaddress},
            #{umaxim},
            #{unickname},
            #{uregistertime},
            #{usignintime},
            #{logintime}
        )
    </insert>
    
    <!-- 修改数据 -->
    <update id="updateUsers" parameterType="map">
        UPDATE USERS
        <set>
            <if test="upassword != null">
                UPASSWORD = #{upassword},
            </if>
            <if test="uphoto != null">
                UPHOTO = #{uphoto},
            </if>
            <if test="usex != null">
                USEX = #{usex},
            </if>
            <if test="uaddress != null">
                UADDRESS = #{uaddress},
            </if>
            <if test="umaxim != null">
                UMAXIM = #{umaxim},
            </if>
            <if test="unickname != null">
                UNICKNAME = #{unickname},
            </if>
            <if test="uregistertime != null">
                UREGISTERTIME = #{uregistertime},
            </if>
            <if test="uban != null">
                UBAN = #{uban},
            </if>
            <if test="usignintime != null">
                USIGNINTIME = #{usignintime},
            </if>
            <if test="uscore != null">
                USCORE = #{uscore},
            </if>
            <if test="usigninday != null">
                USIGNINDAY = #{usigninday},
            </if>
            <if test="logintime != null">
                logintime = #{logintime}
            </if>
        </set>
        WHERE uemail = #{uemail}
    </update>
    
    <!-- 根据主键删除数据 -->
    <delete id="deleteUsersById" parameterType="int">
        DELETE FROM USERS WHERE UID = #{uid}
    </delete>
    
</mapper>