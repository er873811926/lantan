<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- USERS -->
<mapper namespace="pyl.mapper.UsersMapper">
    <!-- This code was generated by TableGo tools, mark 1 begin. -->
    <!-- 字段映射 -->
    <resultMap id="usersMap" type="Users">
        <id column="U_ID" property="uId" jdbcType="INTEGER" />
        <result column="U_EMAIL" property="uEmail" jdbcType="VARCHAR" />
        <result column="U_PASSWORD" property="uPassword" jdbcType="VARCHAR" />
        <result column="U_HOMEPAGE" property="uHomepage" jdbcType="VARCHAR" />
        <result column="U_SEX" property="uSex" jdbcType="VARCHAR" />
        <result column="U_ADDRESS" property="uAddress" jdbcType="VARCHAR" />
        <result column="U_MAXIM" property="uMaxim" jdbcType="VARCHAR" />
        <result column="U_NICKNAME" property="uNickname" jdbcType="VARCHAR" />
        <result column="U_REGISTERTIME" property="uRegistertime" jdbcType="TIMESTAMP" />
        <result column="U_BAN" property="uBan" jdbcType="VARCHAR" />
        <result column="U_SIGNINTIME" property="uSignintime" jdbcType="TIMESTAMP" />
        <result column="U_SCORE" property="uScore" jdbcType="INTEGER" />
        <result column="U_SIGNINDAY" property="uSigninday" jdbcType="INTEGER" />
        <result column="U_IDENTIFICATION" property="uIdentification" jdbcType="VARCHAR" />
    </resultMap>
    <!-- This code was generated by TableGo tools, mark 1 end. -->
    
    <!-- This code was generated by TableGo tools, mark 2 begin. -->
    <!-- 表所有字段 -->
    <sql id="allColumns">
        U_ID, U_EMAIL, U_PASSWORD, U_HOMEPAGE, U_SEX, U_ADDRESS, U_MAXIM, U_NICKNAME, 
        U_REGISTERTIME, U_BAN, U_SIGNINTIME, U_SCORE, U_SIGNINDAY, U_IDENTIFICATION
    </sql>
    <!-- This code was generated by TableGo tools, mark 2 end. -->
    
    <!-- 查询所有数据 -->
    <select id="findUsersAll" resultMap="usersMap">
        SELECT
        <include refid="allColumns" />
        FROM USERS
    </select>
    
    <!-- 根据条件参数查询数据列表 -->
    <select id="findUsersByCondition" resultMap="usersMap" parameterType="map">
        SELECT
        <include refid="allColumns" />
        FROM USERS WHERE 1 = 1
        <if test="uEmail != null and uEmail != ''">
            AND U_EMAIL LIKE CONCAT('%', #{uEmail}, '%')
        </if>
        <if test="uPassword != null and uPassword != ''">
            AND U_PASSWORD LIKE CONCAT('%', #{uPassword}, '%')
        </if>
        <if test="uHomepage != null and uHomepage != ''">
            AND U_HOMEPAGE LIKE CONCAT('%', #{uHomepage}, '%')
        </if>
        <if test="uSex != null and uSex != ''">
            AND U_SEX LIKE CONCAT('%', #{uSex}, '%')
        </if>
        <if test="uAddress != null and uAddress != ''">
            AND U_ADDRESS LIKE CONCAT('%', #{uAddress}, '%')
        </if>
        <if test="uMaxim != null and uMaxim != ''">
            AND U_MAXIM LIKE CONCAT('%', #{uMaxim}, '%')
        </if>
        <if test="uNickname != null and uNickname != ''">
            AND U_NICKNAME LIKE CONCAT('%', #{uNickname}, '%')
        </if>
        <if test="uRegistertime != null">
            AND U_REGISTERTIME = #{uRegistertime}
        </if>
        <if test="uBan != null and uBan != ''">
            AND U_BAN LIKE CONCAT('%', #{uBan}, '%')
        </if>
        <if test="uSignintime != null">
            AND U_SIGNINTIME = #{uSignintime}
        </if>
        <if test="uScore != null">
            AND U_SCORE = #{uScore}
        </if>
        <if test="uSigninday != null">
            AND U_SIGNINDAY = #{uSigninday}
        </if>
        <if test="uIdentification != null and uIdentification != ''">
            AND U_IDENTIFICATION LIKE CONCAT('%', #{uIdentification}, '%')
        </if>
        <if test="uSigninday != null">
            AND U_SIGNINDAY = #{uSigninday}
        </if>
  		<!--分页  -->
        <if test="currentPage!=null and pageSize!=null">
			limit #{currentPage},#{pageSize}
		</if>
    </select>
    
    <!-- 根据主键查询数据 -->
    <select id="findUsersByIds" resultMap="usersMap" parameterType="list">
        SELECT
        <include refid="allColumns" />
        FROM USERS WHERE U_ID IN
        <foreach collection="list" index="index" item="uId" open="(" separator="," close=")">
            #{uId}
        </foreach>
    </select>
    
    <!-- 插入数据 
    <insert id="insertUsers" parameterType="Users">
        INSERT INTO USERS (
             U_EMAIL, U_PASSWORD, U_HOMEPAGE, U_SEX, U_ADDRESS, U_MAXIM, U_NICKNAME, 
            U_REGISTERTIME, U_BAN, U_SIGNINTIME, U_SCORE, U_SIGNINDAY, U_IDENTIFICATION
        ) VALUES (
            
            #{uEmail},
            #{uPassword},
            #{uHomepage},
            #{uSex},
            #{uAddress},
            #{uMaxim},
            #{uNickname},
            #{uRegistertime},
            #{uBan},
            #{uSignintime},
            #{uScore},
            #{uSigninday},
            #{uIdentification}
        )
    </insert>-->
    <!-- 插入数据 -->
    <insert id="insertUsers" parameterType="Users">
        INSERT INTO USERS (
             U_EMAIL, U_PASSWORD, U_SEX, U_ADDRESS, U_MAXIM, U_NICKNAME, 
            U_REGISTERTIME, U_SIGNINTIME, U_IDENTIFICATION
        ) VALUES (
            
            #{uEmail},
            #{uPassword},
      
            #{uSex},
            #{uAddress},
            #{uMaxim},
            #{uNickname},
            #{uRegistertime},
        
            #{uSignintime},
            
            #{uIdentification}
        )
    </insert>
    
    <!-- 修改数据 -->
    <update id="updateUsers" parameterType="map">
        UPDATE USERS
        <set>
            <if test="uPassword != null">
                U_PASSWORD = #{uPassword},
            </if>
            <if test="uHomepage != null">
                U_HOMEPAGE = #{uHomepage},
            </if>
            <if test="uSex != null">
                U_SEX = #{uSex},
            </if>
            <if test="uAddress != null">
                U_ADDRESS = #{uAddress},
            </if>
            <if test="uMaxim != null">
                U_MAXIM = #{uMaxim},
            </if>
            <if test="uNickname != null">
                U_NICKNAME = #{uNickname},
            </if>
            <if test="uRegistertime != null">
                U_REGISTERTIME = #{uRegistertime},
            </if>
            <if test="uBan != null">
                U_BAN = #{uBan},
            </if>
            <if test="uSignintime != null">
                U_SIGNINTIME = #{uSignintime},
            </if>
            <if test="uScore != null">
                U_SCORE = #{uScore},
            </if>
            <if test="uSigninday != null">
                U_SIGNINDAY = #{uSigninday},
            </if>
            <if test="uIdentification != null">
                U_IDENTIFICATION = #{uIdentification}
            </if>
        </set>
        WHERE U_EMAIL = #{uEmail}
    </update>
    
    <!-- 根据主键删除数据 -->
    <delete id="deleteUsersById" parameterType="int">
        DELETE FROM USERS WHERE U_ID = #{uId}
    </delete>
    
</mapper>